<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!--Generated by PHP_UML on Mon, 25 Jul 2011 09:04:26 -0300--><head><title>Baze\System</title><link rel="stylesheet" type="text/css" media="all" href="../style.css"></head><body><div id="navigation"><div id="banner"><ul class="sections"><li><a href="../overview-summary.html" title="Summary of all packages">Overview</a></li><li><a href="package-summary.html" title="Summary of Baze">Package</a></li><li class="active">Class</li><li><a href="../index-all.html">Index</a></li></ul><ul class="navigFrame"><a href="../index.html?Baze/class-System.html" class="navigFrameElem" target="_top">FRAMES</a> <a href="class-System.html" class="navigFrameElem" target="_top">NO FRAMES</a></ul></div><ul class="siblingSections"></ul></div><div id="content"><div class="classSummary"><h3 id="entityPackage">Baze</h3><h1 id="entityName">Class&nbsp;System</h1><hr>public&nbsp;class&nbsp;<strong>System</strong><br><p>Classe System <br>Usage example:<br>$s = System::getInstance(); $s-&gt;init('aConfigFile.xml'); $s-&gt;run();<div><b>Author: </b>Saulo Vallory<br><b>Copyright: </b>2007 Neoconn Networks<br><b>License: </b>http://baze.saulovallory.com/license<br><b>Version: </b>SVN: $Id$<br><b>Since: </b>1.0<br><b>Package: </b>Baze<br></div><b>File: </b>/System.class.php</p><hr></div><div id="fieldSummary"><h2>Field Summary</h2><table border="1" class="tableSummary"><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;static&nbsp;<a href="../Baze/class-System.html" class="linkType">System</a> </span></td><td valign="top"><span class="code"><a href="#%24instance" class="linkSummary">$instance</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;static&nbsp;<a href="../class-SystemConfig.html" class="linkType">SystemConfig</a> </span></td><td valign="top"><span class="code"><a href="#%24config" class="linkSummary">$config</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-AppConfig.html" class="linkType">AppConfig</a> </span></td><td valign="top"><span class="code"><a href="#%24appsConfig" class="linkSummary">$appsConfig</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../datatype-array.html" class="linkType">array</a> </span></td><td valign="top"><span class="code"><a href="#%24appsMap" class="linkSummary">$appsMap</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private</span></td><td valign="top"><span class="code"><a href="#%24app" class="linkSummary">$app</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private</span></td><td valign="top"><span class="code"><a href="#%24cacheBackend" class="linkSummary">$cacheBackend</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> </span></td><td valign="top"><span class="code"><a href="#%24_onProcessRequest" class="linkSummary">$_onProcessRequest</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> </span></td><td valign="top"><span class="code"><a href="#%24_onWakeUp" class="linkSummary">$_onWakeUp</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> </span></td><td valign="top"><span class="code"><a href="#%24_onBeforeRun" class="linkSummary">$_onBeforeRun</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> </span></td><td valign="top"><span class="code"><a href="#%24_onBeginRequest" class="linkSummary">$_onBeginRequest</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> </span></td><td valign="top"><span class="code"><a href="#%24_onLoadApplication" class="linkSummary">$_onLoadApplication</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> </span></td><td valign="top"><span class="code"><a href="#%24_onApplicationEnd" class="linkSummary">$_onApplicationEnd</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> </span></td><td valign="top"><span class="code"><a href="#%24_onBeforeShutdown" class="linkSummary">$_onBeforeShutdown</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> </span></td><td valign="top"><span class="code"><a href="#%24_onShutdown" class="linkSummary">$_onShutdown</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private</span></td><td valign="top"><span class="code"><a href="#%24_request" class="linkSummary">$_request</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private</span></td><td valign="top"><span class="code"><a href="#%24_response" class="linkSummary">$_response</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;static&nbsp;<a href="../class-SystemConfig.html" class="linkType">SystemConfig</a> </span></td><td valign="top"><span class="code"><a href="#%24Config" class="linkSummary">$Config</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">private</span></td><td valign="top"><span class="code"><a href="#%24logger" class="linkSummary">$logger</a></span></td></tr></table></div><div id="methodSummary"><h2>Method Summary</h2><table border="1" class="tableSummary"><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#__construct()" class="linkSummary">__construct</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#init(mixed%20%24configFile=null)" class="linkSummary">init</a>(<a href="../datatype-mixed.html" class="linkType">mixed</a> $configFile=null)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#wakeUp()" class="linkSummary">wakeUp</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#loadConf(string%20%24configFile=null)" class="linkSummary">loadConf</a>(<a href="../datatype-string.html" class="linkType">string</a> $configFile=null)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#run()" class="linkSummary">run</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#loadApplication()" class="linkSummary">loadApplication</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#shutdown()" class="linkSummary">shutdown</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;static&nbsp;<a href="../Baze/class-System.html" class="linkType">System</a> </span></td><td valign="top"><span class="code"><a href="#getInstance()" class="linkSummary">getInstance</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;static&nbsp;</span></td><td valign="top"><span class="code"><a href="#getApp()" class="linkSummary">getApp</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;static&nbsp;<a href="../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#getConfig()" class="linkSummary">getConfig</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;static&nbsp;</span></td><td valign="top"><span class="code"><a href="#getCacheBackend()" class="linkSummary">getCacheBackend</a>()</span></td></tr></table></div><div id="fieldDetail"><h2>Field Detail</h2><div class="detail" id="$instance"><h4>$instance</h4><div class="detailContent"><span class="code">private&nbsp;static&nbsp;<a href="../Baze/class-System.html" class="linkType">System</a> <b> $instance</b></span><p>The sole System instance<div></div></p></div></div><hr><div class="detail" id="$config"><h4>$config</h4><div class="detailContent"><span class="code">private&nbsp;static&nbsp;<a href="../class-SystemConfig.html" class="linkType">SystemConfig</a> <b> $config</b></span><p>The configuration object<div></div></p></div></div><hr><div class="detail" id="$appsConfig"><h4>$appsConfig</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-AppConfig.html" class="linkType">AppConfig</a> <b> $appsConfig</b></span><p>The apps section of config file<div></div></p></div></div><hr><div class="detail" id="$appsMap"><h4>$appsMap</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../datatype-array.html" class="linkType">array</a> <b> $appsMap</b></span><p>The applications in xml indexed by host =&gt; port =&gt; siteroot<div></div></p></div></div><hr><div class="detail" id="$app"><h4>$app</h4><div class="detailContent"><span class="code">private<b> $app</b></span><p>The application to run<div></div></p></div></div><hr><div class="detail" id="$cacheBackend"><h4>$cacheBackend</h4><div class="detailContent"><span class="code">private<b> $cacheBackend</b></span><p></p></div></div><hr><div class="detail" id="$_onProcessRequest"><h4>$_onProcessRequest</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> <b> $_onProcessRequest</b></span><p></p></div></div><hr><div class="detail" id="$_onWakeUp"><h4>$_onWakeUp</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> <b> $_onWakeUp</b></span><p></p></div></div><hr><div class="detail" id="$_onBeforeRun"><h4>$_onBeforeRun</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> <b> $_onBeforeRun</b></span><p></p></div></div><hr><div class="detail" id="$_onBeginRequest"><h4>$_onBeginRequest</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> <b> $_onBeginRequest</b></span><p></p></div></div><hr><div class="detail" id="$_onLoadApplication"><h4>$_onLoadApplication</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> <b> $_onLoadApplication</b></span><p></p></div></div><hr><div class="detail" id="$_onApplicationEnd"><h4>$_onApplicationEnd</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> <b> $_onApplicationEnd</b></span><p></p></div></div><hr><div class="detail" id="$_onBeforeShutdown"><h4>$_onBeforeShutdown</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> <b> $_onBeforeShutdown</b></span><p></p></div></div><hr><div class="detail" id="$_onShutdown"><h4>$_onShutdown</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../class-SystemEvent.html" class="linkType">SystemEvent</a> <b> $_onShutdown</b></span><p></p></div></div><hr><div class="detail" id="$_request"><h4>$_request</h4><div class="detailContent"><span class="code">private<b> $_request</b></span><p></p></div></div><hr><div class="detail" id="$_response"><h4>$_response</h4><div class="detailContent"><span class="code">private<b> $_response</b></span><p></p></div></div><hr><div class="detail" id="$Config"><h4>$Config</h4><div class="detailContent"><span class="code">public&nbsp;static&nbsp;<a href="../class-SystemConfig.html" class="linkType">SystemConfig</a> <b> $Config</b></span><p></p></div></div><hr><div class="detail" id="$logger"><h4>$logger</h4><div class="detailContent"><span class="code">private<b> $logger</b></span><p></p></div></div><hr></div><div id="methodDetail"><h2>Method Detail</h2><div class="detail" id="__construct()"><h4>__construct</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> <b> __construct</b>()</span><p><p>Constructor</p></p></div></div><div class="detail" id="init(mixed $configFile=null)"><h4>init</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../datatype-void.html" class="linkType">void</a> <b> init</b>(<a href="../datatype-mixed.html" class="linkType">mixed</a> $configFile=null)</span><p><p>Initializes the system. Steps described in long description.<br><br>The steps executed by this function were move here from the constructor to allow onWakeUp hooking.<br>If no path is provided for $configFile parameter, the file used will be NEOBASE_ROOT/conf/base-conf.xml This function executes the following steps:<br>1. call wakeUp 2. call loadConf 3. fire onWakeUp</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$configFile</span> - Path to an alternate config file<br></div></div></div><div class="detail" id="wakeUp()"><h4>wakeUp</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> <b> wakeUp</b>()</span><p><p>1. Imports the essential classes 2. Loads the cache (clean old files)</p></p></div></div><div class="detail" id="loadConf(string $configFile=null)"><h4>loadConf</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> <b> loadConf</b>(<a href="../datatype-string.html" class="linkType">string</a> $configFile=null)</span><p><p>Loads the configuration xml file into an object and puts it on self::$config</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$configFile</span> - The configuration fil 	e<br></div></div></div><div class="detail" id="run()"><h4>run</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../datatype-void.html" class="linkType">void</a> <b> run</b>()</span><p><p>Runs the system</p></p></div></div><div class="detail" id="loadApplication()"><h4>loadApplication</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> <b> loadApplication</b>()</span><p><p>Identifies, instantiates and initializes the application to handle the request.</p></p></div></div><div class="detail" id="shutdown()"><h4>shutdown</h4><div class="detailContent"><span class="code">private&nbsp;<a href="../datatype-void.html" class="linkType">void</a> <b> shutdown</b>()</span><p></p></div></div><div class="detail" id="getInstance()"><h4>getInstance</h4><div class="detailContent"><span class="code">public&nbsp;static&nbsp;<a href="../Baze/class-System.html" class="linkType">System</a> <b> getInstance</b>()</span><p><p>Function getInstance This function implements the Singleton pattern.</p></p></div></div><div class="detail" id="getApp()"><h4>getApp</h4><div class="detailContent"><span class="code">public&nbsp;static&nbsp;<b> getApp</b>()</span><p><p>Returns the currently running application.<br>This method causes the creation of the singleton instance</p></p></div></div><div class="detail" id="getConfig()"><h4>getConfig</h4><div class="detailContent"><span class="code">public&nbsp;static&nbsp;<a href="../datatype-void.html" class="linkType">void</a> <b> getConfig</b>()</span><p></p></div></div><div class="detail" id="getCacheBackend()"><h4>getCacheBackend</h4><div class="detailContent"><span class="code">public&nbsp;static&nbsp;<b> getCacheBackend</b>()</span><p><p>Returns default cache backend This method causes the creation of the singleton instance</p></p></div></div></div></div></body></html>
